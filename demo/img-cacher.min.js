!function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){var r=o(12),i=r.generate(function(e){var t=this;t.defineProperties({logging:"undefined"==typeof e.logging||"string"==typeof e.logging?e.logging:"ImgCacher",prefix:e.prefix||"img-"})});i.definePrototype({base64Img:o(2),getImg:o(5),getData:o(4),isValid:o(6),reset:o(8),save:o(9),src:o(11),srcFromCache:o(10),buildSrc:o(3),log:o(7)}),"undefined"!=typeof window&&(window.ImgCacher=i),e.exports=i},function(e,t){function o(e,t){var o=1,r={width:e.width,height:e.height};if(t.fillWidth||t.fillHeight){var i=("undefined"!=typeof t.fillWidth?t.fillWidth:0)/r.width,n=("undefined"!=typeof t.fillHeight?t.fillHeight:0)/r.height;o=i>n?i:n,r.height=e.height*o,r.width=e.width*o}else t.maxWidth||t.maxHeight?(t.maxWidth&&t.maxHeight?o=Math.min(t.maxWidth/e.width,t.maxHeight/e.height):t.maxWidth?o=t.maxWidth/e.width:t.maxHeight&&(o=t.maxHeight/e.height),r.height=e.height*o,r.width=e.width*o):(t.width||t.height)&&(t.width&&t.height?(r.width=t.width,r.height=t.height):t.width?(o=t.width/e.width,r.width=t.width,r.height=e.height*o):t.height&&(o=t.height/e.height,r.width=e.width*o,r.height=t.height));return r}function r(e,t,o){return{x:"undefined"!=typeof t.cropX?t.cropX:t.cropWidth?(o.width-t.cropWidth)/2:0,y:"undefined"!=typeof t.cropY?t.cropY:t.cropHeight?(o.height-t.cropHeight)/2:0,width:t.cropWidth||o.width,height:t.cropHeight||o.height}}var i={};e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={});var a=this,c=a.buildSrc(e,t);if(i[c])return a.log("base64Img","fromMemory",e.src,t),n(void 0,i[c]);var g=document.createElement("canvas"),u=document.createElement("canvas"),h=o(e,t),f=r(e,t,h);u.width=h.width,u.height=h.height,u.getContext("2d").drawImage(e,0,0,u.width,u.height),g.width=f.width,g.height=f.height,t.bg&&(g.getContext("2d").fillStyle=t.bg,g.getContext("2d").fillRect(0,0,f.width,f.height)),g.getContext("2d").drawImage(u,f.x*-1,f.y*-1,u.width,u.height),i[c]=g.toDataURL(),a.log("base64Img","noMemory",e.src,t),a.save(e.src,t,i[c]),n(void 0,i[c])}},function(e,t){e.exports=function(e,t){var o=this;return t="object"==typeof t?t:{},o.prefix+e+"-"+JSON.stringify(t)}},function(e,t){e.exports=function(e,t,o){var r=this;"function"==typeof t&&(o=t,t={}),r.getImg(e,function(e,i,n){return e?o(e):void r.base64Img(i,t,function(e,t){o(e,t,n)})})}},function(e,t){function o(e,t,o){for(var i=r[e],n=i.callbacks.length;n--;)i.callbacks[n].call(i.callbacks[n],t,o),delete i.callbacks[n]}var r={};e.exports=function(e,t){var i=this,n=r[e];return n&&!n.error?n.isLoaded?(i.log("getImg","fromMemory",e),t(void 0,n)):(i.log("getImg","fromMemoryLoading",e),n.callbacks.push(t)):(n=r[e]=window.document.createElement("img"),n.callbacks=[t],n.onload=function(){n.isLoaded=!0,o(e,void 0,n)},n.onerror=function(t){n.error=t,o(e,t)},n.crossOrigin="anonymous",n.src=e,void i.log("getImg","noMemory",e))}},function(e,t){e.exports=function(e){var t=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest("Microsoft.XMLHTTP");t.open("HEAD",e,!1);try{return t.send(),t.status>=200&&(t.status<300||304===t.status)}catch(e){return!1}}},function(e,t){e.exports=function(){var e=this;if(e.logging){var t=Array.prototype.slice.call(arguments);t.unshift(e.logging+" ~>"),console.debug.apply(console.debug,t)}}},function(e,t){e.exports=function(){for(var e,t=this,o=window.localStorage,r=0;r<o.length;r++)e=o.key(r),0===e.indexOf(t.prefix)&&o.removeItem(o.key(r));t.log("reset")}},function(e,t){e.exports=function(e,t,o){var r=this;o||(o=t,t={}),window.localStorage.setItem(r.buildSrc(e,t),o),r.log("save",e,t)}},function(e,t){e.exports=function(e,t,o){var r=this;if("function"==typeof t&&(o=t,t={}),"data:"===e.slice(0,5))o(void 0,e);else{var i=window.localStorage.getItem(r.buildSrc(e,t));i&&r.log("cacheFromSrc","fromLocalStorage",e,t),o(i?void 0:new Error("Image does not exist."),i)}}},function(e,t){e.exports=function(e,t,o){var r=this;r.srcFromCache(e,t,function(i,n){return i?r.getData(e,t,function(i,n){n?(r.log("getSrc","success","noLocalStorage",e,t),o(void 0,n)):(r.log("getSrc","error",e,t),o(i))}):(r.log("getSrc","success","fromLocalStorage",e,t),void o(void 0,n,!0))})}},function(e,t,o){var r;!function(){function i(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function n(e){var t,o;return!!(e&&"object"==typeof e&&(t=Object.getOwnPropertyNames(e).sort(),o=t.length,1===o&&("get"===t[0]&&"function"==typeof e.get||"set"===t[0]&&"function"==typeof e.set)||2===o&&"get"===t[0]&&"function"==typeof e.get&&"set"===t[1]&&"function"==typeof e.set))}function a(e,t,o){var r,i,a,c={},g=o||t,u=o&&t;for(o=g&&"object"==typeof g?g:{},t=u&&"object"==typeof u?u:{},i=Object.getOwnPropertyNames(o),a=i.length,r=0;r<a;r++)n(o[i[r]])?c[i[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,get:o[i[r]].get,set:o[i[r]].set}:c[i[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,writable:!!t.writable,value:o[i[r]]};return Object.defineProperties(e,c),e}function c(){}var g={defineProperties:function(e,t){return a(this,e,t),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},u={isGeneration:function(e){i(e,"function");var t=this;return t.prototype.isPrototypeOf(e.prototype)},isCreation:function(e){var t=this;return e instanceof t},generate:function(e){i(e,"function");var t=this;return a(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(t.prototype)}),a(e,{configurable:!1,enumerable:!1,writable:!1},u),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),e},definePrototype:function(e,t){return a(this.prototype,e,t),this}};a(c,{configurable:!1,enumerable:!1,writable:!1},{prototype:c.prototype}),a(c.prototype,{configurable:!1,enumerable:!1,writable:!1},g),a(c,{configurable:!1,enumerable:!1,writable:!1},u),a(c,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(e){return this.isGeneration(e)},toGenerator:function(e,t){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(e,t)},generateFrom:function(e,t){return i(e,"function"),i(t,"function"),a(t,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),a(t,{configurable:!1,enumerable:!1,writable:!1},u),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:t,generator:t}),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},g),t}}),Object.freeze(c),Object.freeze(c.prototype),r=function(){return c}.call(t,o,t,e),!(void 0!==r&&(e.exports=r))}()}]);
!function(t){function e(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){var o=r(2),i=o.generate(function(t){this.defineProperties({logging:void 0===t.logging||"string"==typeof t.logging?t.logging:"ImgCacher",prefix:t.prefix||"img-"})});i.definePrototype({base64Img:r(3),getImg:r(4),getData:r(5),isValid:r(6),reset:r(7),save:r(8),src:r(9),srcFromLocalStorage:r(10),buildSrc:r(11),log:r(12)}),"undefined"!=typeof window&&(window.ImgCacher=i),t.exports=i},function(t,e,r){var o;!function(){function i(t,e){if(typeof t!==e)throw new TypeError("Expected '"+e+"' but instead found '"+typeof t+"'")}function n(t){var e,r;return!!(t&&"object"==typeof t&&(e=Object.getOwnPropertyNames(t).sort(),1===(r=e.length)&&("get"===e[0]&&"function"==typeof t.get||"set"===e[0]&&"function"==typeof t.set)||2===r&&"get"===e[0]&&"function"==typeof t.get&&"set"===e[1]&&"function"==typeof t.set))}function a(t,e,r){var o,i,a,c={},h=r||e,g=r&&e;for(r=h&&"object"==typeof h?h:{},e=g&&"object"==typeof g?g:{},i=Object.getOwnPropertyNames(r),a=i.length,o=0;o<a;o++)n(r[i[o]])?c[i[o]]={configurable:!!e.configurable,enumerable:!!e.enumerable,get:r[i[o]].get,set:r[i[o]].set}:c[i[o]]={configurable:!!e.configurable,enumerable:!!e.enumerable,writable:!!e.writable,value:r[i[o]]};return Object.defineProperties(t,c),t}function c(){}var h={defineProperties:function(t,e){return a(this,t,e),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},g={isGeneration:function(t){return i(t,"function"),this.prototype.isPrototypeOf(t.prototype)},isCreation:function(t){return t instanceof this},generate:function(t){i(t,"function");var e=this;return a(t,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),a(t,{configurable:!1,enumerable:!1,writable:!1},g),a(t.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:t,generator:t}),t},definePrototype:function(t,e){return a(this.prototype,t,e),this}};a(c,{configurable:!1,enumerable:!1,writable:!1},{prototype:c.prototype}),a(c.prototype,{configurable:!1,enumerable:!1,writable:!1},h),a(c,{configurable:!1,enumerable:!1,writable:!1},g),a(c,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(t){return this.isGeneration(t)},toGenerator:function(t,e){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(t,e)},generateFrom:function(t,e){return i(t,"function"),i(e,"function"),a(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(t.prototype)}),a(e,{configurable:!1,enumerable:!1,writable:!1},g),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},h),e}}),Object.freeze(c),Object.freeze(c.prototype),void 0!==(o=function(){return c}.call(e,r,e,t))&&(t.exports=o)}()},function(t,e){function r(t,e){var r=1,o={width:t.width,height:t.height};if(e.fillWidth||e.fillHeight){var i=(void 0!==e.fillWidth?e.fillWidth:0)/o.width,n=(void 0!==e.fillHeight?e.fillHeight:0)/o.height;r=i>n?i:n,o.height=t.height*r,o.width=t.width*r}else e.maxWidth||e.maxHeight?(e.maxWidth&&e.maxHeight?r=Math.min(e.maxWidth/t.width,e.maxHeight/t.height):e.maxWidth?r=e.maxWidth/t.width:e.maxHeight&&(r=e.maxHeight/t.height),o.height=t.height*r,o.width=t.width*r):(e.width||e.height)&&(e.width&&e.height?(o.width=e.width,o.height=e.height):e.width?(r=e.width/t.width,o.width=e.width,o.height=t.height*r):e.height&&(r=e.height/t.height,o.width=t.width*r,o.height=e.height));return o}function o(t,e,r){return{x:void 0!==e.cropX?e.cropX:e.cropWidth?(r.width-e.cropWidth)/-2:0,y:void 0!==e.cropY?e.cropY:e.cropHeight?(r.height-e.cropHeight)/-2:0,width:e.cropWidth||r.width,height:e.cropHeight||r.height}}function i(t,e,r){var o=document.createElement("canvas"),i=o.getContext("2d"),n=document.createElement("canvas"),a=n.getContext("2d");if(o.width=e,o.height=o.width*t.height/t.width,t.width*r>e){var c=1/r,h={width:Math.floor(t.width*r),height:Math.floor(t.height*r)};for(n.width=h.width,n.height=h.height,a.drawImage(t,0,0,h.width,h.height);h.width*r>e;)h={width:Math.floor(h.width*r),height:Math.floor(h.height*r)},a.drawImage(n,0,0,h.width*c,h.height*c,0,0,h.width,h.height);i.drawImage(n,0,0,h.width,h.height,0,0,o.width,o.height)}else i.drawImage(t,0,0,o.width,o.height);return o}var n={};t.exports=function(t,e,a){"function"==typeof e&&(a=e,e={});var c=this,h=c.buildSrc(t.src,e);if(n[h])return c.log("base64Img","fromMemory",t.src,e),a(void 0,n[h]);var g=document.createElement("canvas"),u=g.getContext("2d"),f=r(t,e),l=o(t,e,f),s=i(t,f.width,"number"==typeof e.sharpness&&e.sharpness<1?e.sharpness:.5);g.width=l.width,g.height=l.height,e.bg&&(u.fillStyle=e.bg,u.fillRect(0,0,l.width,l.height)),u.drawImage(s,-1*l.x,-1*l.y,l.width,l.height,0,0,l.width,l.height),u.imageSmoothingEnabled=!0,n[h]=g.toDataURL(),c.log("base64Img","noMemory",t.src,e),a(void 0,n[h],!0)}},function(t,e){function r(t,e,r){for(var i=o[t],n=i.callbacks.length;n--;)i.callbacks[n].call(i.callbacks[n],e,r),delete i.callbacks[n]}var o={};t.exports=function(t,e,i){var n=this,a=o[t];if(a&&!a.error)return a.isLoaded?(n.log("getImg","fromMemory",t,e),i(void 0,a)):(n.log("getImg","fromMemoryLoading",t,e),a.callbacks.push(i));a=o[t]=o[t]||new Image,a.crossOrigin=!0,a.callbacks=[i],a.onload=function(){a.isLoaded=!0,r(t,void 0,a)},a.onerror=function(e){a.error=e,r(t,e)},"function"==typeof e.src?e.src.call(n,t,function(t){a.src=t}):a.src=e.src||t,n.log("getImg","noMemory",t,e)}},function(t,e){t.exports=function(t,e,r){var o=this;"function"==typeof e&&(r=e,e={}),o.getImg(t,e,function(i,n){if(i)return r(i);o.base64Img(n,e,function(i,n,a){a&&o.save(t,e,n),r(i,n)})})}},function(t,e){t.exports=function(t){var e=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest("Microsoft.XMLHTTP");e.open("HEAD",t,!1);try{return e.send(),e.status>=200&&(e.status<300||304===e.status)}catch(t){return!1}}},function(t,e){t.exports=function(){for(var t,e=this,r=window.localStorage,o=0;o<r.length;o++)t=r.key(o),0===t.indexOf(e.prefix)&&r.removeItem(r.key(o));e.log("reset")}},function(t,e){t.exports=function(t,e,r){var o=this;r||(r=e,e={}),window.localStorage.setItem(o.buildSrc(t,e),r),o.log("save",t,e)}},function(t,e){t.exports=function(t,e,r){var o=this;o.srcFromLocalStorage(o.buildSrc(t,e),function(i,n){if(i)return o.getData(t,e,function(i,n){if(i)return o.log("getSrc","error",i,t,e),r(i);o.log("getSrc","success","noLocalStorage",t,e),r(void 0,n)});o.log("getSrc","success","fromLocalStorage",t,e),r(void 0,n)})}},function(t,e){t.exports=function(t,e){var r=this;if("data:"===t.slice(0,5))e(void 0,t);else{var o=window.localStorage.getItem(t);o&&r.log("cacheFromSrc","fromLocalStorage",t),e(o?void 0:new Error("Image does not exist."),o)}}},function(t,e){t.exports=function(t,e){var r=this;return e="object"==typeof e?e:{},r.prefix+t+"-"+JSON.stringify(e)}},function(t,e){t.exports=function(){var t=this;if(t.logging){var e=Array.prototype.slice.call(arguments);e.unshift(t.logging+" ~>"),console.log.apply(console.debug,e)}}}]);